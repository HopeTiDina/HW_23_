# HW_23_2
﻿	Улучшения в программе:

*1.Масштабируемость:*
    	Теперь можно указать количество страниц для сканирования
   	По умолчанию сканирует 5 страниц (можно изменить)

*2.Обработка ошибок:*
    	Добавлена обработка ошибок при парсинге
    	Программа продолжает работать, даже если на какой-то странице возникла проблема

*3.Интерактивность:*
    	Пользователь вводит имя пользователя rfeldman9
    	Можно запрашивать топ фильмов для разных годов без перезапуска программы

*4.Улучшенный парсинг:*
    	Добавлены попытки найти данные с разными классами
    	Лучшая обработка отсутствующих данных

*5.Визуализация:*
    	Выводится прогресс сканирования
    	Четкий формат вывода топ-10 фильмов

*6.Вежливый скрапинг:*
    	Добавлены задержки между запросами (2 секунды)

	Как использовать:

		1. Запустите программу и введите имя пользователя rfeldman9
		2. Укажите количество страниц для сканирования
		3. Программа сохранит все данные в JSON файл
		4. Затем можно запрашивать топ фильмов по годам
		5. Для каждого запрошенного года будет создан отдельный JSON файл с топ-10 фильмами
		6. Для выхода введите 'q'

Программа выведет топ-10 фильмов указанного года, отсортированных по рейтингу пользователя.


		Постановка задачи: Парсер дневника просмотров Letterboxd с анализом топ-фильмов по годам

*1. Назначение программы*

	Разработать программу на Python, которая:

		Парсит дневник просмотров пользователя Letterboxd
		Сохраняет данные в JSON-файл
		Позволяет получать топ-10 фильмов за указанный год на основе пользовательских оценок

*2. Требования к функционалу*

	Основные функции:

**Сбор данных:** 

		Авторизованный доступ к дневнику пользователя по его username
		Парсинг информации о фильмах (название, год выпуска, оценка, дата просмотра)
		Обработка нескольких страниц дневника (по умолчанию — 5)

**Сохранение данных:** 

		Автоматическое создание JSON-файла с собранными данными
		Формат имени файла: letterboxd_{username}_{timestamp}.json
		Дополнительное сохранение топ-10 фильмов за выбранный год в отдельный файл

**Анализ и вывод:**

		Поиск топ-10 фильмов за указанный год
		Сортировка по оценке (от высокой к низкой)
		Вывод результатов в консоль и сохранение в JSON

**Интерактивность:**

		Ввод username и количества страниц для парсинга
		Возможность многократного запроса топ-10 для разных лет без перезапуска программы

*3. Технические требования*

	Используемые библиотеки:

		requests — для HTTP-запросов
		BeautifulSoup (из bs4) — для парсинга HTML
		json — для работы с JSON-файлами
		time / datetime — для задержек и формирования имен файлов
		collections.defaultdict — для группировки фильмов по годам

	Обработка ошибок:

		Проверка доступности страницы (response.raise_for_status())
		Защита от "битых" данных (пропуск фильмов с отсутствующей информацией)
		Корректная обработка рейтингов (звезды ★, дробные значения, отсутствие оценки)

	Оптимизация:

		Задержка между запросами (time.sleep(2)) для избежания блокировки
		Логирование процесса (вывод в консоль количества обработанных страниц и фильмов)

*4. Входные и выходные данные*

	Входные данные:

		Username пользователя Letterboxd (например, rfeldman9)
		Количество страниц дневника для парсинга (по умолчанию — 5)
		Год для вывода топ-10 фильмов (запрашивается в цикле)


 	Выходные данные:  

		1. JSON-файл с полными данными (все просмотренные фильмы):  
  		 json
  		 [
   		  {
     		  "film_name": "Inception",
     		  "release_date": "2010",
      		  "rating": 5,
     		  "watch_date": "2023-01-10"
   		  },
    		 ...
 		  ]
   
		2. JSON-файл с топ-10 за указанный год (например,'top_2010_films.json').  
		3. Читаемый вывод в консоль (пример):  
   
   	Top 10 films for 2010:
   	1. Inception - Rating: 5 - Watched: 2023-01-10
   	2. Shutter Island - Rating: 4.5 - Watched: 2023-02-15
   	...
  


*5. Пример работы программы* 

		python
	Enter Letterboxd username: rfeldman9
	How many pages to scan (1-10 recommended): 3

	Getting diary data for rfeldman9...
	Processed page 1, total films: 30
	Processed page 2, total films: 60
	Processed page 3, total films: 90

	Data saved to letterboxd_rfeldman9_20240611_153022.json
	Successfully collected data for 90 films.

	Enter year to get top films (or 'q' to quit): 2010

	Top 10 films for 2010:
	1. Inception - Rating: 5 - Watched: 2023-01-10
	2. Shutter Island - Rating: 4.5 - Watched: 2023-02-15
	...
	Saved to top_2010_films_rfeldman9.json

	Enter year to get top films (or 'q' to quit): q


*6.Критерии оценки*

	1.   Работоспособность: 
		Корректный парсинг данных без ошибок.  
    		Сохранение в JSON в заявленном формате.  

	2.   Полнота данных:  
    		Название, год, оценка, дата просмотра.  
    		Обработка всех указанных страниц.  

	3.   Удобство использования:  
    		Четкие подсказки при вводе.  
    		Возможность многократных запросов.  

	4.   Оптимизация:  
    		Вежливый парсинг (задержки между запросами).  
    		Обработка "битых" данных без падения программы.  


7. Дополнительные возможности (по желанию)  

 	Визуализация топа (графики через 'matplotlib').  
 	Анализ по десятилетиям (например, топ-10 1990-х).  
 	Экспорт в CSV или SQLite.  
